@import "./default.css";

$button-types: primary, success, info, warning, danger;
$button-sizes: small, medium, large;

/* Base Button Styles */
.p-button {
  position: relative;
  border: none;
  height: fit-content;
  border-radius: var(--p-border-radius);
  font-size: 14px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  user-select: none;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: padding 0.4s ease;

  /* Loading 状态下的宽度调整 */
  &--loading-active {
    pointer-events: none;
  }

  /* Round variant */
  &--round {
    border-radius: var(--p-border-round-radius);
  }

  /* Block variant */
  &--block {
    display: block;
    width: 100%;
  }

  &:not([disabled]) {
    &:active {
      transform: scale(0.98);
      transition: background-color 0.3s;
    }
  }

  /* Type variants (primary, success, etc.) */
  @each $type in $button-types {
    &--#{$type} {
      background-color: var(--p-#{$type});
      color: var(--p-text-on-#{$type});

      &:hover:not([disabled]) {
        background-color: var(--p-#{$type}-hover);
      }

      &:active:not([disabled]) {
        background-color: var(--p-#{$type}-active);
      }

      &.p-button--plain {
        background-color: transparent;
        color: var(--p-#{$type}-text);
        border: 1px solid var(--p-#{$type});

        &:hover:not([disabled]) {
          background-color: var(--p-#{$type});
          color: var(--p-text-on-#{$type});
        }

        &:active:not([disabled]) {
          background-color: var(--p-#{$type}-active);
          color: var(--p-text-on-#{$type});
        }
      }
    }
  }

  /* Disabled state */
  &[disabled] {
    cursor: not-allowed;
    opacity: 0.6;
    filter: saturate(0.7);
  }

  /* Size variants */
  @each $size in $button-sizes {
    &--#{$size} {
      padding: var(--p-padding-h-#{$size}) var(--p-padding-v-#{$size});
      font-size: var(--p-font-size-#{$size});
      &.p-button--loading-active {
        padding-left: calc(
          var(--p-padding-h-#{$size}) + 20px + var(--p-font-size-#{$size}) - 5px
        );
      }
      &.p-button--loading-active .p-icon--loading {
        left: var(--p-padding-v-#{$size});
        width: calc(var(--p-font-size-#{$size}) - 5px);
      }
    }
  }

  .p-icon--loading {
    position: absolute;
    aspect-ratio: 1;
    padding: 3px;
    border-radius: 50%;
    background: var(--p-text-on-primary);
    --_m: conic-gradient(#0000 10%, #000), linear-gradient(#000 0 0) content-box;
    -webkit-mask: var(--_m);
    mask: var(--_m);
    -webkit-mask-composite: source-out;
    mask-composite: subtract;
    animation: l3 1s infinite linear;
  }
  @keyframes l3 {
    to {
      transform: rotate(1turn);
    }
  }
}
